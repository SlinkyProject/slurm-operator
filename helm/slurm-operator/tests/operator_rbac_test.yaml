# yaml-language-server: $schema=https://raw.githubusercontent.com/helm-unittest/helm-unittest/main/schema/helm-testsuite.json
---
suite: test operator rbac
templates:
- operator/rbac.yaml
chart:
  version: 1.2.3
  appVersion: 1.2.3
release:
  name: test-release
  namespace: test-namespace

tests:
- it: manifest should match snapshot
  asserts:
  - matchSnapshot: {}

- it: should not render when disabled
  set:
    operator:
      enabled: false
  asserts:
  - hasDocuments:
      count: 0

- it: should not render when serviceAccount.create is false
  set:
    operator:
      serviceAccount:
        create: false
  asserts:
  - hasDocuments:
      count: 0
