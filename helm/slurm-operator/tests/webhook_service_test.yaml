# yaml-language-server: $schema=https://raw.githubusercontent.com/helm-unittest/helm-unittest/main/schema/helm-testsuite.json
---
suite: test webhook service
templates:
- webhook/service.yaml
chart:
  version: 1.2.3
  appVersion: 1.2.3
release:
  name: test-release
  namespace: test-namespace

tests:
- it: manifest should match snapshot
  asserts:
  - matchSnapshot: {}

- it: should not render when disabled
  set:
    webhook:
      enabled: false
  asserts:
  - hasDocuments:
      count: 0

- it: should set namespace
  set:
    namespaceOverride: custom-namespace
  asserts:
  - equal:
      path: metadata.namespace
      value: custom-namespace


- it: should set name
  set:
    nameOverride: custom-name
  asserts:
  - equal:
      path: metadata.name
      value: custom-name-webhook
